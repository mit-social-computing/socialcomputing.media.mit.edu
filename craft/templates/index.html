{% extends 'layouts/_home' %}

{% set flexpage = true %}
{% if craft.request.firstSegment %}
{% set entry = craft.entries.section('about').first() %}
{% endif %}

{% block content %}
<main class="l-flexpage">
    <section class="l-full l-slideshow">
        <h2 class="visuallyhidden">Featured Carousel</h2>
        <div class="ss" id="carousel">
        {% for slide in entry.slideshow %}
            {% set i = slide.image.first() %}
            <div>
                <div class="ss-slide" style="background-image: url({{ i.url }});">
                    <span class="ss-headline {{ slide.color }}">{{ slide.headline }}</span>
                </div>
                <div class="ss-caption">{{ slide.headline }}</div>
            </div>
        {% endfor %}
        </div>
    </section>

    <section class="l-highlight-offwhite">
        <h2 class="visuallyhidden">Page Content</h2>
        <div class="l-max only-medium">
            <div class="l-twocolumn">
                <div class="l-2of3">
                    <div class="text">
                        <article class="text-body medium">
                        {{ entry.textContent }}
                        </article>
                    </div>
                </div>
                <div class="l-1of3">
                    <aside id="recentContainer">
                        <h2 class="handwriting">recent</h2>
                        <div class="box--wavy box--gray">
                            <div class="text" id="newsCaption">
                                <div class="text-body">{{ recentNewsSet.recentItems.first().caption }}</div>
                            </div>
                            <div id="recentNews" class="ss--small">

                                {% for slide in recentNewsSet.recentItems %}
                                {% set i = slide.image.first() %}
                                <article class="ss-slide-small">
                                    <h3 class="visuallyhidden">{{ slide.caption }}</h3>
                                    <img src="{{ i.getUrl('thumbnail') }}" width="{{ i.getWidth('thumbnail') }}" height="{{ i.getHeight('thumbnail') }}">
                                </article>
                                {% endfor %}

                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </section>
</main>
{% endblock %}
